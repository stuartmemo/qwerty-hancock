!function(){function e(e){this.version="0.11.0",this.keyDown=function(){},this.keyUp=function(){},this.setKeyOctave=function(e){},this.getKeyOctave=function(){},this.keyOctaveUp=function(){},this.keyOctaveDown=function(){},this.getKeyMap=function(){},this.setKeyMap=function(e){},function(e){user_settings=e||{},a={id:user_settings.id||"keyboard",octaves:user_settings.octaves||3,width:user_settings.width,height:user_settings.height,margin:user_settings.margin||0,startNote:user_settings.startNote||"A3",whiteKeyColour:user_settings.whiteKeyColour||"#fff",blackKeyColour:user_settings.blackKeyColour||"#000",activeColour:user_settings.activeColour||"yellow",borderColour:user_settings.borderColour||"#000",keyboardLayout:user_settings.keyboardLayout||"en",musicalTyping:!1!==user_settings.musicalTyping},(e=document.getElementById(a.id))||((e=document.createElement("div")).id=a.id,document.body.appendChild(e));var t=window.getComputedStyle(e);void 0===a.width&&(a.width=parseInt(t.width)||600),void 0===a.height&&(a.height=parseInt(t.height)||150),e.style.width=a.width+"px",e.style.height=a.height+"px",e.style.display="block",e.style.position="relative",e.style.boxSizing="content-box",a.startOctave=parseInt(a.startNote.charAt(1),10),a.keyOctave=user_settings.keyOctave||a.startOctave,this.setKeyOctave=function(e){return a.keyOctave=e,a.keyOctave},this.getKeyOctave=function(){return a.keyOctave},this.keyOctaveUp=function(){return a.keyOctave++,a.keyOctave},this.keyOctaveDown=function(){return a.keyOctave--,a.keyOctave},this.getKeyMap=function(){return r},this.setKeyMap=function(e){return r=e},E(),D.call(this,e)}.call(this,e)}var t=this,o="undefined"==typeof global?t:t.window,a={},n=!1,i={},r={65:"Cl",87:"C#l",83:"Dl",69:"D#l",68:"El",70:"Fl",84:"F#l",71:"Gl",89:"G#l",90:"G#l",72:"Al",85:"A#l",74:"Bl",75:"Cu",79:"C#u",76:"Du",80:"D#u",59:"Eu",186:"Eu",222:"Fu",221:"F#u",220:"Gu"},c=function(e){return Math.floor((a.width-e)/e)},l=function(e){var t=3===e.length?e.charAt(2):e.charAt(1),e=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"].indexOf(e.slice(0,-1));return e=e<3?e+12+12*(t-1)+1:e+12*(t-1)+1,440*Math.pow(2,(e-49)/12)},s=function(e){null!=e&&(e.style.backgroundColor=a.activeColour)},u=function(e){null!==e&&("white"===e.getAttribute("data-note-type")?e.style.backgroundColor=a.whiteKeyColour:e.style.backgroundColor=a.blackKeyColour)},y=function(e){for(var t=0,n=e.length,o=[],i=0;i<n;i++)if(a.startNote.charAt(0)===e[i]){t=i;break}for(i=0;i<n;i++)o[i]=n-1<i+t?e[i+t-n]:e[i+t];return o},d=function(e){e.el.style.backgroundColor=a.whiteKeyColour,e.el.style.border="1px solid "+a.borderColour,e.el.style.borderRight=0,e.el.style.height=a.height+"px",e.el.style.width=e.width+"px",e.el.style.borderRadius="0 0 5px 5px",e.el.style.position="relative",e.el.style.zIndex="1",e.el.style.boxSizing="content-box",e.noteNumber===C()-1&&(e.el.style.border="1px solid "+a.borderColour)},h=function(e){var t=c(C()),n=Math.floor(t/2);e.el.style.backgroundColor=a.blackKeyColour,e.el.style.border="1px solid "+a.borderColour,e.el.style.position="absolute",e.el.style.left=Math.floor((t+1)*(e.noteNumber+1)-n/2)+"px",e.el.style.width=n+"px",e.el.style.height=a.height/1.5+"px",e.el.style.borderRadius="0 0 3px 3px",e.el.style.zIndex="2",e.el.style.boxSizing="content-box"},f=function(e){e.el.style.display="inline-block",e.el.style["-webkit-user-select"]="none",("white"===e.colour?d:h)(e)},p=function(e){function t(e){e.style.cursor="default",e.style.fontSize="0px",e.style.height=a.height+"px",e.style.padding=0,e.style.position="relative",e.style.listStyle="none",e.style.margin=a.margin,e.style["-webkit-user-select"]="none",e.style.boxSizing="content-box"}t(e.container),t(e.el),e.el.style.width=a.width+"px"},g=function(e,t){"li"==e.tagName.toLowerCase()&&(n=!0,s(e),t(e.title,l(e.title)))},k=function(e,t){"li"==e.tagName.toLowerCase()&&(n=!1,u(e),t(e.title,l(e.title)))},v=function(e,t){n&&(s(e),t(e.title,l(e.title)))},w=function(e,t){n&&(u(e),t(e.title,l(e.title)))},b=function(e){return e.el=document.createElement("li"),e.el.id=e.id,e.el.title=e.id,e.el.setAttribute("data-note-type",e.colour),f(e),e},C=function(){return 7*a.octaves},m=function(){for(var n,o=this,i=[],r=0,l=a.startOctave,s=C(),u=0;u<s;u++)u%this.whiteNotes.length==0&&(r=0),"C"===(bizarre_note_counter=this.whiteNotes[r])&&0!==u&&l++,n=b({colour:"white",octave:l,width:c(s),id:this.whiteNotes[r]+l,noteNumber:u}),i.push(n.el),u!==s-1&&this.notesWithSharps.forEach(function(e,t){e===o.whiteNotes[r]&&(n=b({colour:"black",octave:l,width:c(s)/2,id:o.whiteNotes[r]+"#"+l,noteNumber:u}),i.push(n.el))}),r++;return{keys:i,totalWhiteKeys:s}},x=function(t){t.keys.forEach(function(e){t.el.appendChild(e)})},O=function(e){a.keyPressOffset="C"===e[0]?0:1},E=function(){var e={container:document.getElementById(a.id),el:document.createElement("ul"),whiteNotes:y(["C","D","E","F","G","A","B"]),notesWithSharps:y(["C","D","F","G","A"])},t=m.call(e);return e.keys=t.keys,e.totalWhiteKeys=t.totalWhiteKeys,O(e.whiteNotes),p(e),x(e),e.container.querySelector("ul")?e.container.replaceChild(e.el,e.container.querySelector("ul")):e.container.appendChild(e.el),e},K=function(e){return r[e].replace("l",parseInt(a.keyOctave,10)+a.keyPressOffset).replace("u",(parseInt(a.keyOctave,10)+a.keyPressOffset+1).toString())},N=function(e){return e.ctrlKey||e.metaKey||e.altKey},D=function(e){var t=this;a.musicalTyping&&_.call(this),e.addEventListener("mousedown",function(e){g(e.target,t.keyDown)}),e.addEventListener("mouseup",function(e){k(e.target,t.keyUp)}),e.addEventListener("mouseover",function(e){v(e.target,t.keyDown)}),e.addEventListener("mouseout",function(e){w(e.target,t.keyUp)}),"ontouchstart"in document.documentElement&&(e.addEventListener("touchstart",function(e){g(e.target,t.keyDown)}),e.addEventListener("touchend",function(e){k(e.target,t.keyUp)}),e.addEventListener("touchleave",function(e){w(e.target,t.keyUp)}),e.addEventListener("touchcancel",function(e){w(e.target,t.keyUp)}))},_=function(){var n=this;o.addEventListener("keydown",function(e){var t;N(e)||e.keyCode in r&&(e.preventDefault(),e.keyCode in i||(i[e.keyCode]=!0,e=K(e.keyCode),t=document.getElementById(e),s(t),n.keyDown(e,l(e))))}),o.addEventListener("keyup",function(e){var t;N(e)||e.keyCode in r&&(delete i[e.keyCode],e=K(e.keyCode),t=document.getElementById(e),u(t),n.keyUp(e,l(e)))})};"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=e:exports).QwertyHancock=e:t.QwertyHancock=e}();